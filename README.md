# Zombies
Only for myself

## 🎮 快速开始

### 项目已重构！新结构更清晰、更易维护

**查看详细结构说明**: [STRUCTURE.md](STRUCTURE.md)

### 三个运行入口：

1. **主游戏** - 完整的僵尸生存游戏
   ```bash
   cd src
   python main.py
   ```

2. **背包系统测试** - 独立的装备和背包管理界面
   ```bash
   cd src/tests
   python test_inventory.py
   ```

3. **怪物系统测试** - 怪物生成和平衡性测试
   ```bash
   cd src/tests
   python test_monsters.py
   ```

---

## 📋 游戏设计文档

战斗体系可以是这样的：

游戏开始界面只有一个按钮，开始游戏

进入游戏后是一个二维游戏，包括玩家、僵尸、道路以及不可通行的建筑。

玩家基础操作：
上下左右移动，空格回血（回复值为20%+250，冷却30s），左键射击（任意方向），右键加速奔跑（消耗20%生命，持续10s，冷却30s），esc切出背包并暂停

杀怪获得尸核，可以升级技能树，包括：
体能线，可以选择提高被动回血速度/回血技能效果/闪避/移速/转身速率
战术线，通用战术：射速/暴击率/穿透率/射程，20级可选散弹分支，增加2/4/6散弹
勘探线，特殊技能，增加装备爆率/允许精炼装备（每个装备可以重炼一次词条/重炼后必定提升词条数值）

装备：击杀僵尸随机掉落，玩家经过即可拾取，背包上限为20*40，枪械安装上限为10*20

装备品质：普通（白色，1词条，形状为随机的1-3格方块）、精良（蓝色，2词条，形状为随机的2-5格方格）、史诗（黄色，3词条，形状为随机的6~9方格）、传奇（红色，4~5词条，形状为随机的8~12方格）

装备生成规则：
普通概率：20%
精良：5%
史诗：1%
传奇：0.2%
装备的每个词条会在以下列表中随机生成，每个词条的出现概率和击杀的僵尸种类（仅三种，普通僵尸，巨人僵尸，狂犬僵尸）有关，数值基于两个变量：掉落怪物等级a、装备品质系数b
攻击力
攻击力百分比
防御力
防御力百分比
生命
生命力百分比
射速（百分比，实际作用结果为160%的当前射速+20%射速，则当前射速为基础射速的180%）
暴击率
暴击伤害（基础为5%暴击率，150%暴击伤害）
穿透率（稀有属性）
射程
移速
吸血
回血速度
回血技能效果





BOXHEAD 射僵尸游戏规则说明 (TXT 版本)

I. 游戏核心目标 (CORE_OBJECTIVE)

目标: 生存最长时间 (SURVIVAL_TIME)。

胜利条件: 无 (ENDLESS_MODE)，直到玩家生命值归零。

分数: 击杀敌人获得分数 (SCORE_PER_KILL)，用于衡量表现。

II. 玩家状态与控制 (PLAYER_STATE)

属性

初始值/说明

数据类型 (AI Input)

生命值 (Health)

100 (起始)。被击中时减少。

Integer

金钱 (Money)

0 (起始)。通过击杀敌人获得。

Integer

位置 (Position)

玩家在地图上的 (X, Y) 坐标。

Tuple/Array

移动 (Movement)

玩家可向 360 度方向自由移动。

Input: WASD/Arrows

瞄准/射击 (Aim/Shoot)

控制瞄准和发射武器。

Input: Mouse/Key

死亡条件 (Death)

Health <= 0 时游戏结束。

Boolean

III. 武器系统 (WEAPON_SYSTEM)

机制: 玩家同时携带多把武器，但只有一把处于激活状态。

弹药: 除手枪外，所有武器弹药有限。弹药用完则不可射击。

补给: 弹药需在商店购买或拾取地图上的弹药箱来补充。

武器名称 (WEAPON_NAME)

弹药类型 (AMMO_TYPE)

基础伤害 (BASE_DMG)

射速 (FIRE_RATE)

范围 (RANGE)

AOE? (Area of Effect)

Pistol (手枪)

Infinite

Low

Medium

Long

No

Shotgun (霰弹枪)

Finite

High

Slow

Short (锥形)

No

Uzi (SMG) (冲锋枪)

Finite

Medium

Very High

Medium

No

Grenade (手雷)

Finite

High

Slow (投掷)

Throwing

Yes

Rocket Launcher (火箭筒)

Finite

Very High

Very Slow

Long

Yes

IV. 敌人类型 (ENEMY_TYPES)

刷新机制: 敌人会从地图边缘或固定刷新点不断出现，数量随时间或波数增加。

行为: 所有敌人倾向于沿着最短路径移动至玩家位置。

敌人名称 (ENEMY_NAME)

行为 (BEHAVIOR)

攻击类型 (ATTACK_TYPE)

基础血量 (BASE_HP)

速度修饰 (SPEED_MOD)

金钱奖励 (REWARD_MONEY)

Zombie (僵尸)

移动并接近玩家。

Melee (近战)

Low (10)

1.0 (标准)

10

Mummy (木乃伊)

移动略快，血量更高。

Melee (近战)

Medium (25)

1.5

25

Devil (恶魔)

快速移动，发射火球 (Projectile)。

Ranged (远程)

High (50)

2.0

50

V. 经济与环境 (ECONOMY_AND_MAP)

经济与商店

货币来源: 击杀敌人 (ENEMY_REWARD_MONEY)。

商店位置: 固定在地图上的特定坐标 (SHOP_POSITION)。

购买: 武器 (Weapon_Purchase) 和弹药 (Ammo_Refill)。

地图与障碍物

尺寸: 定义地图的边界 (MAP_SIZE_X, MAP_SIZE_Y)。

障碍物: 无法穿过，如墙壁。敌人和玩家都需绕行。

路障 (Barricades): 玩家可放置的可破坏障碍物，可被敌人攻击和摧毁。

实现python代码，生成一个可视化可操作的背包界面，左上为枪械强化模组、左下是背包，右边是人物当前属性。

人物可以将装备拖来拖去，也可以单击装备让他变形好塞入，当鼠标悬停在上面可以看到对应的属性，右键装备可以摧毁或者精炼。

包含一个config文件，存放常数方便测试修改，并将代码修改为读取当前目录下的对应config

背包规则如下：

基础设定
掉落物： 均为强化模组。
核心枪械： 玩家仅有一把，无换弹机制。
模组空间：
强化模组空间（已装备）：10 * 20 网格区域。
背包空间（未安装）： 20 * 40 网格区域。
装备机制： 
模组形状类似俄罗斯方块，只要在强化模组空间内且互不重叠，即视为装备生效。

模组
模组的品质直接决定了其词条数量 (N)、方格大小 (c) 范围和数值乘数 (b)。高品质对低品质具有压倒性优势。
品质,词条数量 (N),方格大小 (c) 范围,品质系数 (b),掉落概率 (P)
普通,1,1−3,1.0,20.0%
精良,2,4−6,1.25,5.0%
史诗,3,7−9,1.5,1.0%
传奇,4−5,10−12,2.0,0.2%

形状定义模组形状在c设定的方格大小范围内随机生成。所有方块必须是连通的。
词条的最终数值由品质系数 (b)、方格大小 (c) 和掉落怪物等级 (a) 三者共同决定。
最终词条数值 = (词条基础数值 * 品质系数  b) * (1 + 方格大小  c * 空间成长因子) * (1 + 怪物等级  a * 等级成长因子)

词缀分为通用和稀有两类。稀有词缀提供更强大的机制效果，但掉落权重较低。
类别,词缀名称示例,稀有度,战略作用
通用,攻击力、防御力、生命、生命力百分比等,高,提供基础数值堆叠，保证角色基础强度。
稀有,暴击率、暴击伤害、,中,核心 Build 机制，掉落权重低于通用词缀。
枪械强化,射速、穿透率、射程,低,改变枪械手感的关键属性。

僵尸名称,僵尸类型,掉落倾向（增加权重）
游魂,普通型,通用词缀 (攻击力、生命值等)
铁桶,防御型,生存词缀 (防御力百分比、回血速度、生命百分比)
食尸鬼,进攻型,输出/速度稀有词缀 (射速%、暴击率、移速%)

精炼级别,名称,效果
一级,Reroll All,重新随机生成该模组上的所有词条（数量 N 和方格大小 c 不变）。
二级,Lock 1-2,允许玩家保留最多两个指定的词条，然后重新随机生成其余的词条。

伤害减免百分比 = 护甲值/（护甲值 + 难度常数 * 100）



